ğŸ› ï¸ Project Plan â€“ Make <SiteTabs> a fully-controlled component
Overview
Convert SiteTabs into a controlled component that accepts an activeTab prop. All parent pages (starting with pages/markets/Markets.jsx) will pass their state down, ensuring the visual tab and list content stay in sync while preserving existing search-filter logic.

Milestone 1 â€“ Refactor <SiteTabs>
Add new prop

activeTab: string (optional; when present, overrides internal state).

Update logic

Replace current activeTab calculation with:

js
const currentTab = activeTab ?? internalActiveTab;
Keep internalActiveTab fallback for pages that donâ€™t pass activeTab.

Prop-types / TS types

Extend interface to include activeTab?: string.

Unit tests

Snapshot renders when activeTab is provided vs. omitted.

Acceptance criteria

Component visually selects the tab whose label matches activeTab.

Clicking a tab still fires onTabChange(label).

Milestone 2 â€“ Wire up Markets.jsx
State

js
const [activeTab, setActiveTab] = useState("Active");
Handlers

handleTabChange = (label) => setActiveTab(label);

Render

<SiteTabs
  tabs={tabsData}
  activeTab={activeTab}      // NEW
  onTabChange={handleTabChange}
/>
Search filter

Ensure currentStatus is derived from activeTab (already true).

Acceptance criteria

Switching tabs changes both the highlighted tab and the displayed market list.

Search bar continues filtering within the selected status.

Milestone 3 â€“ Audit other usages
Search codebase

nginx

rg "<SiteTabs" src/
For each call site

If parent already maintains tab state â†’ pass activeTab.

If not, leave as uncontrolled (no changes required).

Acceptance criteria

No runtime warnings about missing props.

Legacy pages still work as before.

Milestone 4 â€“ Regression & UX QA
Manual smoke tests

Markets page: click through Active / Closed / Resolved / All while typing into search.

Other pages using <SiteTabs> (if any) still navigate correctly.

Automated

Cypress (or Playwright) test: assert that clicking each tab changes list length or first row status.

Milestone 5 â€“ Documentation & Clean-up
README / Storybook

Update <SiteTabs> usage example to show both controlled and uncontrolled modes.

Changelog entry

Note new activeTab prop and backward compatibility.

