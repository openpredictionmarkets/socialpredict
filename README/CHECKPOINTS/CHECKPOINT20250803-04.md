ðŸ“„ Project Plan â€“ Fix Search with Tab-Synced Query
Objective
The current search behavior does not properly reflect the active tabâ€™s status filter (Active, Closed, Resolved, All). This leads to confusion when the correct search results are fetched but not visually tied to the userâ€™s selected tab.

This task ensures that:

Tab selection and search are fully synchronized

The correct status is included in all backend /markets/search queries

The system continues supporting fallback results and status-filtered views

âœ… Milestone 1 â€“ Create TAB_TO_STATUS map utility
Tasks:
Create a new file at src/utils/statusMap.js (or utils/statusMap.ts).

Add and export the following constant:

js
Copy
Edit
export const TAB_TO_STATUS = {
  Active:   "active",
  Closed:   "closed",
  Resolved: "resolved",
  All:      "all", // Backend interprets "all" as no filter
};
Use this mapping wherever status logic is tied to UI tab labels.

Acceptance Criteria:
File exists and is importable.

Mapping is correct and matches backend expectations.

âœ… Milestone 2 â€“ Update Markets.jsx to manage search state and trigger API calls
Tasks:
In pages/markets/Markets.jsx, import the utility:

js
Copy
Edit
import { TAB_TO_STATUS } from "../../utils/statusMap";
Add state variables:

js
Copy
Edit
const [activeTab, setActiveTab] = useState("Active");
const [query, setQuery] = useState("");
Add useEffect to trigger API calls on either state change:

js
Copy
Edit
useEffect(() => {
  const status = TAB_TO_STATUS[activeTab];
  fetch(`/v0/markets/search?query=${encodeURIComponent(query)}&status=${status}`)
    .then(res => res.json())
    .then(setResults)
    .catch(console.error);
}, [query, activeTab]);
Notes:
query is controlled by the search input.

activeTab is controlled by the tabs.

Hook glues them together.

Acceptance Criteria:
API is called with updated query and status params as either value changes.

Correct search results populate for each tab + query combo.

